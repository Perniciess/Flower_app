
---

### 5. Создание заказа + платёж не атомарны
`app/service/orders_service.py:81-93` — заказ создаётся в БД, затем вызывается внешний API Yookassa. Если API упадёт — в базе остаётся заказ без платежа. Нужна стратегия компенсации (отмена заказа при ошибке платежа) или паттерн outbox.

---

## HIGH — серьёзные проблемы

### 6. Redis: `maxmemory-policy allkeys-lru`
`docker/docker-compose.yaml` — при нехватке памяти Redis начнёт вытеснять ключи, включая токены верификации, чёрный список JWT и данные сброса пароля. Нужен `noeviction` или `volatile-lru` (только ключи с TTL).

---
